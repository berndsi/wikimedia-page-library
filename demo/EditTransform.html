<!doctype html>
<html lang=en>

  <head>
    <meta charset=utf-8>
    <title>EditTransform</title>
    <link href=../build/wikimedia-page-library-transform.css rel=stylesheet>
    <style>
      .fixture_body { margin: 4px; border: 1px solid black; padding: 4px; }
      h2 { margin: 4px; }
      .content-rtl h2 { text-align: right; }
    </style>
  </head>

  <body>
    <template>
      <div class=fixture_html>
        <div class=fixture_body>
          <h2>
            Edit section (<span class=platform></span>, <span class=direction></span>, <span class=theme></span>,
              <span class=protection></span>, <span class=compatibility></span>)
          </h2>
        </div>
      </div>
    </template>

    <script src=../build/wikimedia-page-library-transform.js></script>
    <script>
      /* global pagelib */
      const template = document.querySelector('template')

      let index = 0
      for (const platform of Object.keys(pagelib.PlatformTransform.CLASS)) {
        for (const direction of ['ltr', 'rtl']) {
          for (const theme of Object.keys(pagelib.ThemeTransform.THEME)) {
            for (const protection of Object.keys(pagelib.EditTransform.CLASS.PROTECTION)) {
              const compatibilities = Object.keys(pagelib.CompatibilityTransform.COMPATIBILITY)
                .concat('NONE')
              for (const compatibility of compatibilities) {
                const clone = document.importNode(template.content, true)

                const html = clone.querySelector('.fixture_html')
                html.classList.add(pagelib.PlatformTransform.CLASS[platform])
                html.classList.add(`content-${direction}`)
                html.classList.add(pagelib.ThemeTransform.THEME[theme])
                const protectionClass = pagelib.EditTransform.CLASS.PROTECTION[protection]
                if (protectionClass) {
                  html.classList.add(protectionClass)
                }
                const compatibilityClass = pagelib.CompatibilityTransform.COMPATIBILITY[compatibility]
                if (compatibilityClass) {
                  html.classList.add(compatibilityClass)
                }

                clone.querySelector('.platform').textContent = platform
                clone.querySelector('.direction').textContent = direction
                clone.querySelector('.theme').textContent = theme
                clone.querySelector('.protection').textContent = protection
                clone.querySelector('.compatibility').textContent = compatibility

                const link = pagelib.EditTransform.newEditSectionLink(document, index)
                const header = clone.querySelector('h2')
                header.parentNode.insertBefore(link, header)
                document.querySelector('body').appendChild(clone)
                ++index
              }
            }
          }
        }
      }</script>

</body>

</html>