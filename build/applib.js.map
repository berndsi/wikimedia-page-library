{"version":3,"file":"applib.js","sources":["../src/CollapseTable.js","../src/index.js"],"sourcesContent":["/**\n  Tries to get an array of table header (TH) contents from a given table. If\n  there are no TH elements in the table, an empty array is returned.\n  @param {!Element} element Table or blob of HTML containing a table?\n  @param {?string} pageTitle\n  @return {!Array<string>}\n*/\nconst getTableHeader = (element, pageTitle) => {\n  let thArray = []\n\n  if (element.children === undefined || element.children === null) {\n    return thArray\n  }\n\n  for (let i = 0; i < element.children.length; i++) {\n    const el = element.children[i]\n\n    if (el.tagName === 'TH') {\n      // ok, we have a TH element!\n      // However, if it contains more than two links, then ignore it, because\n      // it will probably appear weird when rendered as plain text.\n      const aNodes = el.querySelectorAll('a')\n      if (aNodes.length < 3) {\n        // todo: remove nonstandard Element.innerText usage\n        // Also ignore it if it's identical to the page title.\n        if ((el.innerText && el.innerText.length || el.textContent.length) > 0\n                && el.innerText !== pageTitle && el.textContent !== pageTitle\n                && el.innerHTML !== pageTitle) {\n          thArray.push(el.innerText || el.textContent)\n        }\n      }\n    }\n\n    // if it's a table within a table, don't worry about it\n    if (el.tagName === 'TABLE') {\n      continue\n    }\n\n    // recurse into children of this element\n    const ret = getTableHeader(el, pageTitle)\n\n    // did we get a list of TH from this child?\n    if (ret.length > 0) {\n      thArray = thArray.concat(ret)\n    }\n  }\n\n  return thArray\n}\n\nexport default {\n  getTableHeader\n}","import CollapseTable from './CollapseTable'\n\nexport default {\n  CollapseTable\n}"],"names":["getTableHeader","element","pageTitle","thArray","children","undefined","i","length","el","tagName","aNodes","querySelectorAll","innerText","textContent","innerHTML","push","ret","concat"],"mappings":";;AAAA;;;;;;;AAOA,IAAMA,iBAAiB,SAAjBA,cAAiB,CAACC,OAAD,EAAUC,SAAV,EAAwB;MACzCC,UAAU,EAAd;;MAEIF,QAAQG,QAAR,KAAqBC,SAArB,IAAkCJ,QAAQG,QAAR,KAAqB,IAA3D,EAAiE;WACxDD,OAAP;;;OAGG,IAAIG,IAAI,CAAb,EAAgBA,IAAIL,QAAQG,QAAR,CAAiBG,MAArC,EAA6CD,GAA7C,EAAkD;QAC1CE,KAAKP,QAAQG,QAAR,CAAiBE,CAAjB,CAAX;;QAEIE,GAAGC,OAAH,KAAe,IAAnB,EAAyB;;;;UAIjBC,SAASF,GAAGG,gBAAH,CAAoB,GAApB,CAAf;UACID,OAAOH,MAAP,GAAgB,CAApB,EAAuB;;;YAGjB,CAACC,GAAGI,SAAH,IAAgBJ,GAAGI,SAAH,CAAaL,MAA7B,IAAuCC,GAAGK,WAAH,CAAeN,MAAvD,IAAiE,CAAjE,IACOC,GAAGI,SAAH,KAAiBV,SADxB,IACqCM,GAAGK,WAAH,KAAmBX,SADxD,IAEOM,GAAGM,SAAH,KAAiBZ,SAF5B,EAEuC;kBAC7Ba,IAAR,CAAaP,GAAGI,SAAH,IAAgBJ,GAAGK,WAAhC;;;;;;QAMFL,GAAGC,OAAH,KAAe,OAAnB,EAA4B;;;;;QAKtBO,MAAMhB,eAAeQ,EAAf,EAAmBN,SAAnB,CAAZ;;;QAGIc,IAAIT,MAAJ,GAAa,CAAjB,EAAoB;gBACRJ,QAAQc,MAAR,CAAeD,GAAf,CAAV;;;;SAIGb,OAAP;CAxCF;;AA2CA,oBAAe;;CAAf;;AChDA,YAAe;;CAAf;;"}